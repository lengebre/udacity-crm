# CRM Backend

The following workspaces provides a sample go application that runs an HTTP server utilizing gorilla/mux. This sample application includes the following capabilites which allows a user to create, read, update, and delete resources specified in a mock database backend. 

## Table of Contents
- [How to Use](#how-to-use)
- [Endpoints](#endpoints)


## How to Use

1. Download the `main.go` and `main_test.go` from the associated workspace
2. Download the external 3rd Party Modules
    - github.com/google/uuid - Used to generate a unique id
    - github.com/gorilla/mux - Used as the http router

    ```bash
    go get github.com/google/uuid
    go get github.com/gorilla/mux
    ```
3. Set the environment variable `PORT` to the port you want the server to run on
    ```bash
    export PORT=8080
    ```
4. Run the application

    ```bash
    go run main.go
    ```
5. Test the application

    ```bash
    go test
    ```
6. Build the application

    ```bash
    go build . -o crm
    ```
6. Run the application

    ```bash
    ./udacity-crm
    ```

## Endpoints

The customer object contains the following fields:

- **name** - The name of the customer
- **role** - The role of the customer
- **email** - The email of the customer
- **phone** - The phone number of the customer
- **contacted** - A boolean value indicating if the customer has been contacted
- **id** - A unique id generated by the server

**Non existing paths will return a 404 status code utilizing the `NotFoundHandler` function and static page name 404.html located in the static directory.**

### GET /customers

The GET customers endpoint returns a list of available customers in the database.

#### Example GET /customers
    
```bash
curl --location --request GET 'http://localhost:8080/customers' \
--header 'Content-Type: application/json' \
--data-raw '{
        "name": "Example",
        "role": "Exampl Role",
        "email": "exampleEmail@local.host",
        "phone": "(123) 456-7893",
        "contacted": false
 }'
```

#### Example GET /customers Response

The response of the GET customers endpoint is a JSON array of customer objects. The response will have a status code of 200.

```json
{
    "35d6cf6e-731c-11ed-a1eb-0242ac120002": {
        "name": "Aye",
        "role": "AyeAye",
        "email": "Aye@local.host",
        "phone": "(123) 456-7893",
        "contacted": true
    },
    "41234r27324-731c-11ed-a1eb-0242ac120002": {
        "name": "Dey",
        "role": "DeyDey",
        "email": "Dey@local.host",
        "phone": "(123) 456-7899",
        "contacted": false
    },
    ...
}
```

### POST /customers

The POST customers endpoint creates a new customer in the database.

#### Example POST /customers
    
```bash
curl --location --request POST 'http://localhost:8080/customers' \
--header 'Content-Type: application/json' \
--data-raw '{
        "name": "Example",
        "role": "Example Role",
        "email": "example@local.host",
        "phone": "(123)456-7891",
        "contacted": true
 }'
```
#### Example POST /customers Response

The response of the POST customers endpoint is a JSON object of the newly created customer. The response will have a status code of 201.


```json
{
    "name": "Example",
    "role": "Example Role",
    "email": "example@local.host",
    "phone": "(123)456-7891",
    "contacted": true
}
```

### GET /customers/{id}

The GET customers/{id} endpoint returns a single customer from the database.

#### Example GET customers/{id}
    
```bash
curl --location --request GET 'http://localhost:8080/customers/35d6cf6e-731c-11ed-a1eb-0242ac120002' \
--header 'Content-Type: application/json' \
--data-raw '{
        "name": "Example",
        "role": "Example Role",
        "email": "example@local.host",
        "phone": "(123)456-7891",
        "contacted": true
 }'
```
#### Example GET customers/{id} Response

The response of the GET customers/{id} endpoint is a JSON object of the customer with the specified id. A customer id that are not found will return a status code of **404** and a empty JSON object.


```json
{
    "name": "Aye",
    "role": "AyeAye",
    "email": "Aye@local.host",
    "phone": "(123) 456-7893",
    "contacted": true
}
```

### PUT /customers/{id}

The PUT customers/{id} endpoint updates a single customer in the database. 

#### Example PUT customers/{id}
    
```bash
curl --location --request PUT 'http://localhost:8080/customers/35d6cf6e-731c-11ed-a1eb-0242ac120002' \
--header 'Content-Type: application/json' \
--data-raw '{
        "name": "Example",
        "role": "Example Role",
        "email": "example@local.host",
        "phone": "(123)456-7891",
        "contacted": true
 }'
 ```
#### Example PUT customers/{id} Response

The response of the PUT customers/{id} endpoint is a JSON object of the customer with the specified id. The response will have a status code of 200. A customer id that are not found will return a status code of **404** and an empty JSON object.

```json
{
    "name": "Example",
    "role": "Example Role",
    "email": "


```json
{
    "name": "Example",
    "role": "Example Role",
    "email": "example@local.host",
    "phone": "(123)456-7891",
    "contacted": true
}
```
